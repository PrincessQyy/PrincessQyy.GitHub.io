---
layout:     post
title:      "【network】常见的计算机网络协议"
date:       2017-04-19 20:39:00
author:     "Yuki"
---

这几天面试京东，所以把之前学过的的协议都总结了一下，主要有ARP、IP、ICMP、TCP、UDP、DNS、HTTP，话不多说，下面就开始吧。

#### ARP

关于ARP，首先要说的是它是网络层的协议，虽然他是将IP地址解析为MAC地址，看起来好像是链路层的活儿，但它是根据网络层IP数据包包头中的IP地址信息解析出目标硬件地址（MAC地址）信息的，所以这是一个网络层的协议。

工作原理如下：

1. 主机A想向主机B发包，首先，他会查看自己的ARP缓存表的信息，ARP缓存是个用来储存IP地址和MAC地址的缓冲区，其本质就是一个IP地址到MAC地址的映射，若是找到了缓存记录，主机A就可以构建以太网帧，在首部填上源目MAC地址，将包发给主机B。

2. 若是没有找到缓存记录，主机A会将ARP请求帧广播到本地网络上的所有主机。源主机A的IP地址和MAC地址都包括在ARP请求中。本地网络上的每台主机都接收到ARP请求并且检查是否与自己的IP地址匹配。如果主机发现请求的IP地址与自己的IP地址不匹配，它将丢弃ARP请求。

3. 主机B确定ARP请求中的IP地址与自己的IP地址匹配，则将主机A的IP地址和MAC地址映射添加到本地ARP缓存中。主机B将包含其MAC地址的ARP回复消息直接发送回主机A。

4. 当主机A收到从主机B发来的ARP回复消息时，会用主机B的IP和MAC地址映射更新ARP缓存。本机缓存是有生存期的，生存期结束后，将再次重复上面的过程。主机B的MAC地址一旦确定，主机A就能向主机B发送IP通信了。

#### IP