---
layout:     post
title:      "【Network】PC端访问服务器的过程"
date:       2017-09-15 09:28:00
author:     "Yuki"
---

PC端在浏览器输入域名，先进行DNS解析，得到IP地址，然后应用层的浏览器告诉TCP要通过IP地址建立连接，然后TCP将IP地址告诉网络层，注意，此处知道目的IP，其实不会向网络上发送任何数据，必须要通过ARP进行解析，这时候就有两种情况，一是你访问的目的地址和你所在网络是直连的（也就是说中间不需要经过多跳路由），这时候就直接由ARP发送广播包询问目的IP所对应的Mac地址；二是非直连的，这时候就需要IP选路函数去寻找去往目的IP的下一跳地址是多少，知道下一跳后，ARP需要去解析下一跳路由器网关的Mac地址，这也是通过发ARP广播包实现的，有了Mac后ARP包的目的帧地址改为网关的Mac地址，这时候网卡才能去发包，