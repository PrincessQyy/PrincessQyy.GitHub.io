---
layout:     post
title:      "【Linux】用户及文件权限管理"
date:       2017-01-21 19:00:00
author:     "Yuki"

---

##用户权限管理##
####【查看用户权限】


用命令 who 可以查看用户权限

* who 命令常用参数

-a	打印能打印的全部

-d	打印死掉的进程

-m	同am i,mom likes

-q	打印当前登录用户数及用户名

-u	打印当前登录用户登录信息

-r	打印运行等级

####【创建用户】


su <user>可以切换到用户user，执行时需要输入目标用户的密码，sudo <cmd>可以以特权级别运行cmd命令，需要当前用户属于sudo组，且需要输入当前用户密码。su - <user>命令也是切换用户，同时环境变量也会跟着改变成目标用户的环境变量。

* 用命令 sudo adduser [user] 来创建新用户

* 使用命令  su -l [user] 来切换用户

* 退出当前用户可以使用exit命令，或按Ctrl+d

####【用户组】


在 Linux 里面每个用户都有一个归属（用户组），用户组简单地理解就是一组用户的集合，它们共享一些资源和权限，同时拥有私有资源，当然一个用户是可以属于多个用户组的。

可以使用命令 groups 用户名 来查看用户属于哪个用户组，其中冒号之前表示用户，后面表示该用户所属的用户组。每次新建用户如果不指定用户组的话，默认会自动创建一个与用户名相同的用户组。默认情况下新创建的用户是不具有 root 权限的，也不在 sudo 用户组，可以让其加入sudo用户组从而获取 root 权限。

使用 usermod 命令可以为用户添加用户组，同样使用该命令你必需有 root 权限，你可以直接使用 root 用户为其它用户添加用户组，或者用其它已经在 sudo 用户组的用户使用 sudo 命令获取权限来执行该命令。

* 首先用命令 su [user1] 让root用户user1使用sudo权限

* 然后用命令 sudo usermod -G sudo [user2] 将user2添加到sudo用户组

* 要从用户组中删除用户也是很简单的，直接用命令 sudo deluser [user] --remove-home

##文件权限##

####【查看文件权限】


* 使用命令 ls -l 来使用较长格式列出所有文件。
* 使用命令 ll <文件名> 来使用较长格式列出某个文件

显示信息如下图，

![](https://dn-anything-about-doc.qbox.me/linux_base/3-9.png/logoblackfont)

![](https://dn-anything-about-doc.qbox.me/linux_base/3-10.png/logoblackfont)



* 文件类型

关于文件类型，这里有一点你必需时刻牢记Linux 里面一切皆文件，正因为这一点才有了设备文件（ /dev 目录下有各种设备文件，大都跟具体的硬件设备相关）这一说，还有 socket和 pipe。软链接文件，链接文件是分为两种的，另一种当然是“硬链接”，硬链接不常用，而软链接等同于 Windows 上的快捷方式。

* 文件权限

读权限，表示你可以使用 cat <file name> 之类的命令来读取某个文件的内容;写权限，表示你可以编辑和修改某个文件； 执行权限，通常指可以运行的二进制程序文件或者脚本文件，如同 Windows 上的 'exe' 后缀的文件，不过 Linux 上不是通过文件后缀名来区分文件的类型。你需要注意的一点是，一个目录同时具有读权限和执行权限才可以打开并查看内部文件，而一个目录要有写权限才允许在其中创建其它文件，这是因为目录文件实际保存着该目录里面的文件的列表等信息

所有者权限，这一点相信你应该明白了，至于所属用户组权限，是指你所在的用户组中的所有其它用户对于该文件的权限，比如，你有一个艾派德,那么这个用户组权限就决定了你的兄弟姐妹有没有权限使用它破坏它和占有它。

* 链接数

链接到该文件所在的 inode 结点的文件名数目。

* 文件大小

以 inode 结点大小为单位来表示的文件大小，你可以给 ls 加上 -lh 参数来更直观的查看文件的大小。

补充一下关于 ls 命令的一些其它常用的用法：

*　使用命令 ls -A 显示除了 '.'(当前目录)，'..' 上一级目录之外的所有包含隐藏文件的文件（Linux 下以 '.' 开头的文件为隐藏文件）

* 使用命令 ls -dl <目录名> 查看某一个目录的完整属性，而不是显示目录里面的文件属性

* 使用命令 ls -AsSh 显示所有文件大小，并以普通人类能看懂的方式呈现。

####【变更文件所有者】

* 首先进入文件所在目录
* 然后使用命令 sudo chown [user] <文件名> 变更文件所有者为user
*
####【修改文件权限】


如果你有一个自己的文件不想被其他用户读、写、执行，那么就需要对文件的权限做修改，这里有两种方式：

方式一：二进制数字表示
![](https://dn-anything-about-doc.qbox.me/linux_base/3-14.png/logoblackfont)
每个文件的三组权限（拥有者，所属用户组，其他用户,记住这个顺序是一定的）就对应这一个 "rwx"，所以如果我要将文件的权限改为只有我自己可以用那么就这样:700   表示拥有者有所有权限，而所属用户组，其他用户没有任何权限。
* 用命令 chmod 700 <文件名> 来修改权限为只有我自己可以用。（700可以根据自己的需要来更改文件权限）

方式二：加减赋值操作

* 为修改权限为只有我自己可以用，还可以用命令 chmod go-rw <文件名>

'g''o'还有'u'，分别表示group，others，user，'+'，'-' 就分别表示增加和去掉相应的权限。

